<UserControl
    x:Class="Revit.AI.Assistant.UIComponents.LoadingSpinner"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Revit.AI.Assistant.UIComponents"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006">
    <DockPanel
        Background="White"
        LastChildFill="True"
        Opacity="0.92">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid Grid.Row="1">
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Ellipse
                    Grid.Row="0"
                    Width="50"
                    Height="50"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    RenderTransformOrigin="0.5 0.5"
                    Stroke="#3495F0"
                    StrokeDashArray="51 10"
                    StrokeThickness="2">
                    <Ellipse.RenderTransform>
                        <RotateTransform x:Name="Rotation" Angle="0" />
                    </Ellipse.RenderTransform>
                    <Ellipse.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation
                                        Storyboard.TargetName="Rotation"
                                        Storyboard.TargetProperty="Angle"
                                        From="0"
                                        To="360" />
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Ellipse.Triggers>
                </Ellipse>
                <TextBlock
                    Grid.Row="1"
                    Margin="0,10,0,0"
                    HorizontalAlignment="Center"
                    Background="Transparent"
                    FontFamily="Roboto"
                    FontSize="14"
                    Text="{Binding Path=ProgressMessage, UpdateSourceTrigger=PropertyChanged}" />
            </Grid>
        </Grid>
    </DockPanel>
</UserControl>
